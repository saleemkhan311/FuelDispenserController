<Page
    x:Class="FuelDispenserController.Views.ListDetailsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:models="using:FuelDispenserController.Core.Models"
    xmlns:views="using:FuelDispenserController.Views"
    xmlns:behaviors="using:FuelDispenserController.Behaviors" xmlns:local="using:FuelDispenserController"
    behaviors:NavigationViewHeaderBehavior.HeaderMode="Never"
    mc:Ignorable="d">

    <Grid Background="#1E1E1E" Padding="20" CornerRadius="12" VerticalAlignment="Center">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="9*" />
        </Grid.ColumnDefinitions>

        <!-- Left Sidebar -->
        <StackPanel Grid.Column="0" Spacing="10"  Height="685" CornerRadius="17" Background="#1F2937" >
            <TextBlock Text="Registered Users"
                   HorizontalAlignment="Center"
                   FontSize="24" FontWeight="Bold"
                   Foreground="#4EA8FC" Margin="0,15,0,0" />

            <!-- Scrollable User List -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="500">
                <ListView x:Name="UserListView" Background="Transparent" BorderBrush="Transparent" SelectionChanged="Selection_Changed_Click">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="local:User">
                            <Grid>
                                <!-- Background panel -->
                                <StackPanel Background="#1E1E1E" Margin="0,4" Padding="12" CornerRadius="8">
                                    <TextBlock Text="{x:Bind Username}" FontSize="16" Foreground="LightGray" />
                                    <TextBlock Text="{x:Bind RegistrationDate}" FontSize="12" Foreground="Gray" />
                                    <TextBlock Text="{x:Bind UserType}" FontSize="12" Foreground="Gray" />
                                    
                                </StackPanel>

                                <!-- Delete Button (X) -->
                                <Button 
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Margin="0,6,4,0"
                                            Width="40"
                                            Height="40"
                                            Background="Transparent"
                                            Foreground="Red"
                                            BorderThickness="0"
                                            ToolTipService.ToolTip="Delete User"
                                            Click="DeleteButton_Click"
                                            Tag="{x:Bind}">
                                    <SymbolIcon Symbol="Delete" Foreground="Red" />
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </ScrollViewer>

            <Button Content="Register New User"
                Background="#0078D4" Foreground="White" Height="40"
                CornerRadius="6" Margin="0,20,0,0"
                FontWeight="SemiBold" HorizontalAlignment="Center" />

        </StackPanel>

        <!-- Right Content Area -->
        <Border Grid.Column="1" Background="#1F2937" CornerRadius="20" Padding="20" Margin="10" Height="685" >
            <StackPanel Spacing="16" HorizontalAlignment="Center" Padding="25" Width="400"  Background="#374151"  CornerRadius="15">
                <TextBlock Text="User Registration"
                       HorizontalAlignment="Center"
                       FontSize="26" FontWeight="Bold"
                       Foreground="#4CAF50" />

                <!-- Username -->
                <TextBlock Text="Username" FontSize="17" Foreground="#CCCCCC" FontWeight="Bold" />
                <TextBox x:Name="UsernameTextBox" PlaceholderText="Enter Username"
                     Background="#1E1E1E" BorderBrush="#444" Foreground="#CCCCCC"
                     CornerRadius="4" Padding="6"/>
                <ComboBox x:Name="RoleComboBox"
                          Width="200"
                          Header="Select Role"
                          PlaceholderText="Choose a role"
                          Margin="0"
                          Background="#1E1E1E"
                          Foreground="LightGray">
                    
                    <ComboBoxItem >
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE77B;" Foreground="SkyBlue"/>
                            <!-- Admin icon -->
                            <TextBlock Text="Admin" Foreground="LightGray"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE779;" Foreground="LightGreen"/>
                            <!-- Manager icon -->
                            <TextBlock Text="Manager" Foreground="LightGray"/>
                        </StackPanel>
                    </ComboBoxItem>
                </ComboBox>

                <!-- Password -->
                <TextBlock Text="Password" FontSize="17" Foreground="#CCCCCC" FontWeight="Bold" />
                <PasswordBox x:Name="PasswordBox" PlaceholderText="Enter Password"
                         Background="#1E1E1E" BorderBrush="#444" Foreground="#CCCCCC"
                         CornerRadius="4" Padding="6" />

                <!-- Confirm Password -->
                <TextBlock Text="Confirm Password" FontSize="17" Foreground="#CCCCCC" FontWeight="Bold" />
                <PasswordBox x:Name="ConfirmPasswordBox" PlaceholderText="Re-enter Password"
                         Background="#1E1E1E" BorderBrush="#444" Foreground="#CCCCCC"
                         CornerRadius="4" Padding="6" />

                <!-- Error Message -->
                <TextBlock x:Name="ErrorMessage" Text="Passwords do not match"
                       Foreground="#F44336" FontSize="12" Visibility="Collapsed" />

                <!-- Register Button -->

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                    <Button Content="Register"
                     Background="#4CAF50" Foreground="White" Height="40"
                     CornerRadius="6" FontWeight="Bold"
                     Click="RegisterButton_Click"/>
                    <Button Content="Update User"
                        Foreground="White" Height="40"
                        CornerRadius="6" FontWeight="Bold"
                        Click="UpdateButton_Click"/>
                </StackPanel>
                
               

                <!-- Success/Error Message -->
                <TextBlock x:Name="FormMessage" Text="" FontSize="14"
                       HorizontalAlignment="Center"
                       Foreground="#80DEEA" TextWrapping="Wrap" />
            </StackPanel>
        </Border>
    </Grid>

</Page>
